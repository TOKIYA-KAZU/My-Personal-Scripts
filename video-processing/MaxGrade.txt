set cut_paste_input [stack 0]
version 10.0 v1
push $cut_paste_input
Group {
 name MaxGrade1
 tile_color 0x79a8ffff
 selected true
 xpos 982
 ypos -1232
 addUserKnob {20 MaxGrade}
 addUserKnob {41 SampleChannels T CurveTool1.channels}
 addUserKnob {41 channels_1 l GradeChannels T Grade1.channels}
 addUserKnob {26 ""}
 addUserKnob {41 mode l "TimeEcho Method" T TimeEcho1.mode}
 addUserKnob {41 framesbehind l "Frames to look at" T TimeEcho1.framesbehind}
 addUserKnob {41 frmaesfade l "Frames to fade out" T TimeEcho1.frmaesfade}
 addUserKnob {26 ""}
 addUserKnob {41 go l Go! T CurveTool1.go}
 addUserKnob {41 maxlumapixdata l "Maximum Luminence Pixel" T CurveTool1.maxlumapixdata}
 addUserKnob {41 maxlumapixvalue l "Maximum Luminence Pixel value" T CurveTool1.maxlumapixvalue}
 addUserKnob {41 minlumapixdata l "Minimum Luminence Pixel" T CurveTool1.minlumapixdata}
 addUserKnob {41 minlumapixvalue l "Minimum Luminence Pixel value" T CurveTool1.minlumapixvalue}
 addUserKnob {41 smooth T CurveTool1.smooth}
 addUserKnob {41 rgbMax_smoothed T CurveTool1.rgbMax_smoothed}
 addUserKnob {41 rgbMin_smoothed T CurveTool1.rgbMin_smoothed}
 addUserKnob {26 ""}
 addUserKnob {6 switchMax l Max +STARTLINE}
 switchMax true
 addUserKnob {6 switchMin l Min -STARTLINE}
 switchMin true
 addUserKnob {41 gamma T Grade1.gamma}
 addUserKnob {7 mix}
 mix 1
}
 Input {
  inputs 0
  name Input1
  xpos 180
  ypos -730
 }
 Dot {
  name Dot1
  xpos 214
  ypos -582
 }
set N63809000 [stack 0]
 Dot {
  name Dot2
  xpos 324
  ypos -582
 }
set Nb771c00 [stack 0]
 Dot {
  name Dot4
  xpos 434
  ypos -582
 }
 Dot {
  name Dot3
  xpos 434
  ypos -390
 }
push $N63809000
 Grade {
  blackpoint {{(switchMin==1)?parent.CurveTool1.rgbMin_smoothed:0}}
  whitepoint {{(switchMax==1)?parent.CurveTool1.rgbMax_smoothed:1}}
  name Grade1
  selected true
  xpos 180
  ypos -466
 }
 Merge2 {
  inputs 2
  mix {{1-parent.mix}}
  name Merge1
  xpos 180
  ypos -394
 }
 Output {
  name Output1
  xpos 180
  ypos -346
 }
push $Nb771c00
 TimeEcho {
  framesbehind 25
  frmaesfade 25
  name TimeEcho1
  xpos 290
  ypos -490
 }
 CurveTool {
  operation "Max Luma Pixel"
  ROI {0 0 {width} {height}}
  autocropdata {{parent.CurveTool1.ROI.x} {parent.CurveTool1.ROI.y} {parent.CurveTool1.ROI.r} {parent.CurveTool1.ROI.t}}
  maxlumapixdata {{curve} {curve}}
  maxlumapixvalue {{curve} {curve} {curve}}
  minlumapixdata {{curve} {curve}}
  minlumapixvalue {{curve} {curve} {curve}}
  name CurveTool1
  xpos 290
  ypos -466
  addUserKnob {20 User}
  addUserKnob {7 rgbMax}
  rgbMax {{"max(\n       maxlumapixvalue.r,\n       maxlumapixvalue.g,\n       maxlumapixvalue.b     \n)"}}
  addUserKnob {7 rgbMin}
  rgbMin {{"min(\n       minlumapixvalue.r,\n       minlumapixvalue.g,\n       minlumapixvalue.b     \n)"}}
  addUserKnob {7 smooth R 0 100}
  smooth 10
  addUserKnob {7 rgbMax_smoothed}
  rgbMax_smoothed {{(smooth!=0)?rgbMax.integrate(frame-smooth,frame+smooth)/(2*smooth):rgbMax}}
  addUserKnob {7 rgbMin_smoothed}
  rgbMin_smoothed {{(smooth!=0)?rgbMin.integrate(frame-smooth,frame+smooth)/(2*smooth):rgbMin}}
 }
end_group
